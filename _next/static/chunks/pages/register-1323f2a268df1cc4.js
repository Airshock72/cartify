(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[787],{9702:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return n(1442)}])},6133:(e,t,n)=>{"use strict";n.d(t,{DL:()=>m,TD:()=>o,q9:()=>c,uj:()=>d});var r=n(4577),a=n(6679);function i(){let e=(0,r._)(["\n    mutation RemoveItem($input: RemoveItemArgs!) {\n        removeItem(input: $input) {\n            _id\n            hash\n            items {\n                _id\n                product {\n                    _id\n                    title\n                }\n                quantity\n            }\n        }\n    }\n"]);return i=function(){return e},e}function s(){let e=(0,r._)(["\n    mutation UpdateItemQuantity($input: UpdateItemQuantityArgs!) {\n        updateItemQuantity(input: $input) {\n            _id\n            items {\n                _id\n                product {\n                    _id\n                    title\n                }\n                quantity\n            }\n        }\n    }\n"]);return s=function(){return e},e}function l(){let e=(0,r._)(["\n    mutation Register {\n        register {\n            _id\n            token\n        }\n    }\n"]);return l=function(){return e},e}function u(){let e=(0,r._)(["\n    mutation AddItem($input: AddItemArgs!) {\n        addItem(input: $input) {\n            _id\n            items {\n                _id\n                product {\n                    _id\n                    title\n                }\n                quantity\n            }\n        }\n    }\n"]);return u=function(){return e},e}let o=(0,a.J1)(i()),d=(0,a.J1)(s()),c=(0,a.J1)(l()),m=(0,a.J1)(u())},1442:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(4848),a=n(6540),i=n(5420),s=n(6715),l=n(6133);let u=()=>{let[e,t]=(0,a.useState)(""),[n,r]=(0,a.useState)(""),[u,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(""),[m]=(0,i.n)(l.q9),p=(0,s.useRouter)();return(0,a.useEffect)(()=>{localStorage.getItem("visitorToken")&&p.push("/").then()},[p]),{handleRegister:async t=>{if(t.preventDefault(),n!==u){c("Passwords do not match");return}try{var r;let{data:t}=await m({variables:{email:e,password:n}});(null==t?void 0:null===(r=t.register)||void 0===r?void 0:r.token)&&(localStorage.setItem("visitorToken",t.register.token),await p.push("/"))}catch(e){console.error("Registration failed:",e),c("Registration failed. Please try again.")}},repeatPassword:u,setPassword:r,setRepeatPassword:o,password:n,error:d,setEmail:t,email:e}},o=()=>{let{handleRegister:e,email:t,setEmail:n,setRepeatPassword:a,password:i,setPassword:s,repeatPassword:l,error:o}=u();return(0,r.jsx)("div",{className:"container mt-5",children:(0,r.jsx)("div",{className:"row justify-content-center",children:(0,r.jsxs)("div",{className:"col-md-6",children:[(0,r.jsx)("h1",{className:"text-center",children:"Registration"}),(0,r.jsxs)("form",{onSubmit:e,children:[(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),(0,r.jsx)("input",{type:"email",className:"form-control",id:"email",value:t,onChange:e=>n(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),(0,r.jsx)("input",{type:"password",className:"form-control",id:"password",value:i,onChange:e=>s(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"repeatPassword",className:"form-label",children:"Repeat Password"}),(0,r.jsx)("input",{type:"password",className:"form-control",id:"repeatPassword",value:l,onChange:e=>a(e.target.value),required:!0})]}),o&&(0,r.jsx)("div",{className:"alert alert-danger",children:o}),(0,r.jsx)("button",{type:"submit",className:"btn btn-primary w-100",children:"Register"})]})]})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[348,636,593,792],()=>t(9702)),_N_E=e.O()}]);